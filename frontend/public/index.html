<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Urban Heat Island Analysis System</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Mapbox CSS -->
    <link
        href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css"
        rel="stylesheet"
    />

    <style>
        body {
            margin: 0;
            font-family: Arial, Helvetica, sans-serif;
            background-color: #0f172a;
            color: #ffffff;
        }

        header {
            text-align: center;
            padding: 15px;
            background: #020617;
        }

        header h1 {
            margin: 0;
            font-size: 22px;
        }

        #map {
            width: 100%;
            height: 90vh;
        }

        .legend {
            position: absolute;
            bottom: 30px;
            left: 20px;
            background: rgba(0,0,0,0.8);
            padding: 10px;
            border-radius: 6px;
            font-size: 14px;
        }

        .legend div {
            margin-bottom: 5px;
        }

        .dot {
            height: 10px;
            width: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 6px;
        }
    </style>
</head>

<body>

<header>
    <h1>Urban Heat Island (UHI) Analysis & Green Infrastructure Planning</h1>
</header>

<div id="map"></div>

<div class="legend">
    <div><span class="dot" style="background:red"></span>High Heat Zone</div>
    <div><span class="dot" style="background:orange"></span>Moderate Heat Zone</div>
    <div><span class="dot" style="background:green"></span>Low Heat Zone</div>
</div>

<!-- Mapbox JS -->
<script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>

<script>
    // ðŸ”‘ Replace with your Mapbox token
    mapboxgl.accessToken = "YOUR_MAPBOX_ACCESS_TOKEN";

    const map = new mapboxgl.Map({
        container: "map",
        style: "mapbox://styles/mapbox/dark-v11",
        center: [85.82, 20.30], // Bhubaneswar
        zoom: 11
    });

    // Fetch UHI data from Flask backend
    fetch("http://localhost:5000/api/uhi")
        .then(response => response.json())
        .then(data => {
            data.forEach(point => {
                let color;
                if (point.zone === 2) color = "red";
                else if (point.zone === 1) color = "orange";
                else color = "green";

                const el = document.createElement("div");
                el.style.backgroundColor = color;
                el.style.width = "10px";
                el.style.height = "10px";
                el.style.borderRadius = "50%";

                new mapboxgl.Marker(el)
                    .setLngLat([point.lon, point.lat])
                    .setPopup(
                        new mapboxgl.Popup({ offset: 25 })
                            .setHTML(`
                                <strong>Heat Zone:</strong> ${point.zone}<br>
                                <strong>LST:</strong> ${point.lst.toFixed(2)} Â°C<br>
                                <strong>NDVI:</strong> ${point.ndvi.toFixed(2)}<br>
                                <strong>Recommendation:</strong><br>
                                ${point.recommendation}
                            `)
                    )
                    .addTo(map);
            });
        })
        .catch(error => {
            console.error("Error l
